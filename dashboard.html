<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>𝔇𝔞𝔰𝔥𝔟𝔬𝔞𝔯𝔡</title>
<style>
body {
    background-color: white;
    color: black;
    font-family: 'Courier New', monospace;
    margin: 0;
    padding: 20px;
}
h1 {
    text-align: center;
    font-size: 3em;
    margin-bottom: 10px;
}
.console-block {
    border: 1px solid #000;
    padding: 15px 20px;
    margin-bottom: 20px;
    white-space: pre-wrap;
    background: #f8f8f8;
    border-radius: 8px;
}
</style>
</head>
<body>

<h1>𝔇𝔞𝔰𝔥𝔟𝔬𝔞𝔯𝔡</h1>

<div class="console-block" id="scanlog">
[ ⟢ Omni.Eye.Scanlog : v.8.0.5.𝘳𝘶𝘯𝘯𝘪𝘯𝘨 ]<br>
⟢ Geoflux.Trace     : Loading...<br>
⟢ Vessel.Type       : Loading...<br>
⟢ Entry.Points      : Loading...<br>
⟢ Pulse.Active      : Loading...
</div>

<div class="console-block" id="statusFeed">
╭─◈ STATUS FEED<br>
⚑ No new fragments uploaded today.<br>
⚑ Your last model render: Loading...<br>
⚑ 0 users accessed your Word.Rift in the past hour.<br>
╰────────────────────────────────────────────────────────╯
</div>

<div class="console-block" id="riftMetrics">
[ ⟢ Rift.Metrics : Passive Echo Scan ]<br>
⟢ Total.Views     : Loading...        ⟢ Echo.Time       : Loading...<br>
⟢ Unique.Visits   : Loading...        ⟢ Avg.View.Span   : Loading...<br>
⟢ Portal.Uptime   : Loading...       ⟢ Most.Active.Zone: Loading...<br>
</div>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<script>
// Your Firebase config
const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
  databaseURL: "https://YOUR_PROJECT_ID-default-rtdb.firebaseio.com",
  projectId: "YOUR_PROJECT_ID",
  storageBucket: "YOUR_PROJECT_ID.appspot.com",
  messagingSenderId: "SENDER_ID",
  appId: "APP_ID"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

// Update dashboard from database
function updateDashboard(visitors) {
  const countries = {};
  const devices = {Mobile:0, Desktop:0, Void:0};
  let activeUsers = 0;

  const now = Date.now();

  for (let key in visitors) {
    const v = visitors[key];
    // count active users (last 5 min)
    if (now - v.lastActive < 5*60*1000) activeUsers++;
    // count countries
    if (v.country) countries[v.country] = (countries[v.country] || 0)+1;
    // count devices
    if (v.device && devices[v.device] !== undefined) devices[v.device]++;
  }

  // Geoflux.Trace
  const geoflux = Object.keys(countries).join(' • ');
  // Vessel.Type
  const vessel = `Mobile: ${devices.Mobile} | Desktop: ${devices.Desktop} | Void: ${devices.Void}`;
  // Pulse.Active
  const active = `∿ ${activeUsers} Souls currently inside`;

  document.getElementById('scanlog').innerHTML = `[ ⟢ Omni.Eye.Scanlog : v.8.0.5.𝘳𝘶𝘯𝘯𝘪𝘯𝘨 ]<br>
⟢ Geoflux.Trace     : ${geoflux || 'None'}<br>
⟢ Vessel.Type       : ${vessel}<br>
⟢ Entry.Points      : Discord.Gate • Direct.Rift<br>
⟢ Pulse.Active      : ${active}`;

  // Status Feed placeholders (update as needed)
  document.getElementById('statusFeed').innerHTML = `╭─◈ STATUS FEED<br>
⚑ No new fragments uploaded today.<br>
⚑ Your last model render: [Malzreth_Blade.obj]<br>
⚑ ${Object.keys(visitors).length} users accessed your Word.Rift in the past hour.<br>
╰────────────────────────────────────────────────────────╯`;

  // Rift Metrics placeholders
  document.getElementById('riftMetrics').innerHTML = `[ ⟢ Rift.Metrics : Passive Echo Scan ]<br>
⟢ Total.Views     : ${Object.keys(visitors).length}        ⟢ Echo.Time       : 4.6 hrs<br>
⟢ Unique.Visits   : ${Object.keys(visitors).length}        ⟢ Avg.View.Span   : 23 sec<br>
⟢ Portal.Uptime   : 89 hrs       ⟢ Most.Active.Zone: ${geoflux.split(' • ')[0] || 'Unknown'}<br>`;
}

// Listen to Firebase changes
db.ref('visitors').on('value', snapshot => {
  const data = snapshot.val() || {};
  updateDashboard(data);
});
</script>

</body>
</html>
